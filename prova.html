<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prova 1</title>
    <style>

    </style>
    <script>
        function insereLista(){
            let myDiv = document.getElementById("lista-prova");
            let capt1 = document.createTextNode("Capítulo-1: Introdução");
            let capt2 = document.createTextNode("Capítulo-2: Desenvolvimento");
            let myUl = document.createElement("ul");
            let myElementLi = document.createElement("li");

            myDiv.appendChild(myUl);

            myElementLi.appendChild(capt1);
            myElementLi.style.color = "blue"
            myDiv.appendChild(myElementLi);

            myElementLi = document.createElement("li");
            myElementLi.appendChild(capt2);
            myElementLi.style.color = "blue"
            myDiv.appendChild(myElementLi);
        }

        function insereSecao(){
            let myParentLi = document.getElementsByTagName("li");
            let myLiContent = document.getElementById("valor-secao").value;
            let myUl = document.createElement("ul");
            let myLi = document.createElement("li");
            let myLiText = document.createTextNode(myLiContent);

            myLi.appendChild(myLiText);
            myUl.appendChild(myLi);
            myParentLi[0].appendChild(myUl);
        }

        function mostraDadosSatelite(){
            const xhttp = new XMLHttpRequest();
            xhttp.open("GET", "https://services.swpc.noaa.gov/json/goes/instrument-sources.json", true);
            xhttp.send();
            xhttp.onload = function() {
                resposta = JSON.parse(this.responseText);
                let str = Object.values(resposta[0].electrons);
                str += " "+Object.getOwnPropertyNames(resposta[0].protons);
                let objDiv = document.getElementById("dSol");
                objDiv.innerHTML =
                "<h3>Satélites ativos:</h3>"+str;
            }
        }
    </script>
</head>
<body>
    <h1>Exercício 1. itens a e b</h1>
    <div id="lista-prova">
        <!--LISTA SERÁ INSERIDA AQUI-->
    </div>
        <br>
    <div>
        <label for="valor-secao">escreva o conteúdo da seção</label>
        <input id="valor-secao" type="text">
        <button onclick="insereLista()">inserir lista</button>
        <button onclick="insereSecao()">inserir seção</button><br>
    </div>
    <h1>Exercício 2. explicação da função "mostraDadosSatelite"</h1>
    <p>
        <h3>explicação do código por linhas</h3>
        <ol>
            <li>function mostraDadosSatelite(){</li>
            <li>const xhttp = new XMLHttpRequest();</li>
            <li>xhttp.open("GET", "https://services.swpc.noaa.gov/json/goes/instrument-sources.json", true);</li>
            <li>xhttp.send();</li>
            <li>xhttp.onload = function() {</li>
            <li>resposta = JSON.parse(this.responseText);</li>
            <li>let str = Object.values(resposta[0].electrons);</li>
            <li>str += " "+Object.getOwnPropertyNames(resposta[0].protons);</li>
            <li>let objDiv = document.getElementById("dSol");</li>
            <li>objDiv.innerHTML = "(h3)Satélites ativos:(/h3)"+str;</li>
            <li>}</li>
            <li>}</li>
        </ol>
    </p>
    <p>
        <ol>
            <li>declaração da função</li>
            <li>variável que inicia um requerimento para o servidor.</li>
            <li>método aplicado ao objeto que indica o endereço do objeto que será "pego"(GET) e assincrono</li>
            <li>envia o requerimento para o servidor</li>
            <li>o método "onload" inicia uma função declarada logo em seguida na linha assim que o browser se inicia</li>
            <li>a variavel "resposta" representa o "JSON" obtida pelo URL convertido em lista de objetos pelo método "parse"</li>
            <li>declaração de uma variável "str" com a propriedade "electrons" objeto de indice 0 da lista</li>
            <li>incremento na variável "str" com a propriedade "protons" objeto de indice 0 da lista</li>
            <li>obtem o elemento do HTML pelo ID e atribui na váriavel "objDiv"</li>
            <li>altera o conteúdo com o método innerHTML.</li>
            <li>chaves de encerramento da função interna</li>
            <li>chave de encerramento da função</li>
        </ol>
    </p>
    <h1>Exercício 3. A função "insereSecao()" do Exercício</h1>
    <h3>A função que insere seções no capítulo 1 acessa o primeiro elemento do array obtido a partir do método "getElementsByTagName"<br>Assim, ela insere uma nova lista no elemento de indice 0</h3>
</body>
</html>